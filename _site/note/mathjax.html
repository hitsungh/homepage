<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="icon" href="/assets/images/favicon.png">    
<title>利用 MathJax 在 Jekyll 网页中插入 Tex/LaTex 数学公式 | Guhao Sun's Website</title>
    
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Rubik:400,400i,500,500i,700,700i" rel="stylesheet">
<link href="/assets/css/theme.css" rel="stylesheet">
<link href="/assets/css/custom.css" rel="stylesheet">
    

    
  
    
<!-- ================ MathJax============================
-->

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
        }
    });

    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>      
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"> </script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    TeX: { equationNumbers: { autoNumber: "AMS" } }
});
</script>
    
</head>
    

    

<body class="layout-post-right-sidebar">

    
<!-- Begin Menu Navigation
================================================== -->
<header class="navbar navbar-toggleable-md navbar-light bg-white fixed-top mediumnavigation">
    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarsWow" aria-controls="navbarsWow" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
    </button>
    <div class="container">

        <!-- Begin Logo -->
        <a class="navbar-brand" href="/">
        <img src="/assets/images/logo.png" alt="Guhao Sun's Website">
        </a>
        <!-- End Logo -->

        <!-- Begin Menu -->
<div class="collapse navbar-collapse" id="navbarsWow">
            
            <!-- Begin Menu -->
            <ul class="navbar-nav ml-auto">
                
                <li class="nav-item">                
                <a class="nav-link" href="/index.html">Home</a>
                </li>

                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="dropdown01" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Research</a>
                    <div class="dropdown-menu" aria-labelledby="dropdown01">
                    <a class="dropdown-item" href="/research/MPC">Model Predictive Control</a>
                    <a class="dropdown-item" href="/jekyll/tutorial/2018/01/12/red-riding.html">Right Sidebar</a>
                    </div>
                </li>

                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="dropdown01" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Note</a>
                    <div class="dropdown-menu" aria-labelledby="dropdown01">
                    <a class="dropdown-item" href="/note/switched-system-basic">Switched system basic</a>
                    <a class="dropdown-item" href="/note/game-theory-basic">Game theory</a>
                    <a class="dropdown-item" href="/note/mathjax">MathJax</a>
                    </div>
                </li>
                
                <li class="nav-item">                
                    <a class="nav-link" href="/about">About</a>
                </li> 
                
                <li class="nav-item">                
                    <a class="nav-link" href="/contact">Contact</a>
                </li> 
                
                
            </ul>
            <!-- End Menu -->
            
        </div>
    </div>
</header>
    

    
<!-- End Menu Navigation
================================================== -->
    
<div class="site-content">
    
    <div class="container">

    <!-- Site Title
    ================================================== -->

    <div class="mainheading" style="display:none;">
        <h1 class="sitetitle">Guhao Sun's Website</h1>
        <p class="lead">
             This is a big step!
        </p>
    </div>


    <!-- Content
    ================================================== --> 
    <div class="main-content">
        <!-- Begin Article
================================================== -->

	<div class="row">

		<!-- Post -->        
        
        
		<div class="col-md-8 col-lg-8">
			<div class="mainheading">              
                
                <!-- Post Categories -->
                <div class="after-post-tags">
                    <ul class="tags">
                        
                        
                        <li>
                         <a href="/category/mathjax/">mathjax</a>
                        </li>
                        
                        <li>
                         <a href="/category/note/">note</a>
                        </li>
                        
                    </ul>
                </div>
                <!-- End Categories -->
                
                <!-- Post Title -->
				<h1 class="posttitle">利用 MathJax 在 Jekyll 网页中插入 Tex/LaTex 数学公式</h1> 
                
			</div>

			<!-- Post Featured Image -->
			
			<!-- End Featured Image -->

			<!-- Post Content -->
			<div class="article-post">
				<p>文章转载自<a href="http://baige5117.github.io/blog/mathjax_in_jekyll.html" target="_blank">向日葵花</a>。</p>

<p>MathJax 是一款基于 JavaScript 的开源数学公式显示引擎，利用它可在各种当下流行的浏览器中“完美”渲染并显示 LaTax、MathML 以及 AsciiMath 数学公式。</p>

<p>但是，在 Jekyll 中使用 MathJax 时会出现严重问题，原因在于一些 LaTex 公式通常被作为 Markdown 标记处理从而影响公式的正常输出显示，因此需要一些特殊的配置。</p>

<h3 id="配置并链接-mathjax-库">配置并链接 MathJax 库</h3>
<p>在<code>&lt;head&gt;</code>&gt;标签内添加如下代码：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;script type="text/x-mathjax-config"&gt;
    MathJax.Hub.Config({
        tex2jax: {
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
        }
    });

    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i &lt; all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
&lt;/script&gt;      
&lt;script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"&gt; &lt;/script&gt;
</code></pre></div></div>

<p>数学公式都添加了<code>has-jax</code>类，从而可利用 CSS 对公式进行样式控制，在<code>theme.css</code>文件中添加以下内容，根据需要可自行修改：</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>code.has-jax {
	font: inherit; 
	font-size: 90%; 
	background: inherit; 
	border: inherit;
}
</code></pre></div></div>
<p>这样就可以在文章中插入数学公式了，插入格式为：</p>

<p>段间公式：</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>`\[
LaTax 公式内容
\]`
</code></pre></div></div>
<p>行内公式：</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>`\( LaTax 公式内容 \)`
</code></pre></div></div>
<p>至于为什么要将数学公式置于反引号之内，是因为反引号用于代码控制，使输入的代码不受 Markdown 语法干扰而原样输出，这样 MathJax 即可正确渲染解析这些公式。</p>

<h3 id="自动为公式编号">自动为公式编号</h3>
<p>默认情况下公式的自动编号是关闭状态，开启它需要添加以下配置信息：</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;script type="text/x-mathjax-config"&gt;
MathJax.Hub.Config({
	TeX: { equationNumbers: { autoNumber: "AMS" } }
});
&lt;/script&gt;
</code></pre></div></div>
<p>存在两种自动编号形式，一种是为 AMSmath 环境下的公式编号，即 LaTex 公式，简称 AMS 方式，另一种为所有显示的公式进行编号。上面的配置属于第一种方式，使用第二种方式的方法是将上面配置信息中的<code>AMS</code>替换为<code>all</code>。</p>

<p>AMS 方式也存在两种形式：带星号和不带星号，带星号的公式不产生编号而不带星号的公式产生编号，例如：</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>\begin{equation}
   E = mc^2
\end{equation}
</code></pre></div></div>
<p>将产生编号，而下面的公式将不会进行编号：</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>\begin{equation*}
   e^{\pi i} + 1 = 0
\end{equation*}
</code></pre></div></div>
<p>在公式内部也可使用<code>\notag</code>或<code>\nonumber</code>使当前公式停止编号，例如本文公式示例中最后一个公式即没有编号，书写代码如下：</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>`\[
\int_0^\infty \frac{x^3}{e^x-1}\,dx = \frac{\pi^4}{15}
\notag
\]`
</code></pre></div></div>
<p>使用<code>\tage{}</code>可自定义当前公式的编号值，而且不影响其它公式的连续自动编号。例如本文公式示例中第二个公式的编号即被修改为<code>Eq-x</code>，书写代码如下：</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>`\[
P(E)   = {n \choose k} p^k (1-p)^{ n-k}
\tag{Eq-x}
\]`
</code></pre></div></div>
<p>使用<code>\label</code>和<code>\eqref</code>可引用公式，引用方式如下：</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>In equation \eqref{eq:sample}, we find the value of an
interesting integral:

\begin{equation}
  \int_0^\infty \frac{x^3}{e^x-1}\,dx = \frac{\pi^4}{15}
  \label{eq:sample}
\end{equation}
</code></pre></div></div>
<p>其中标签值<code>eq:sample</code>可被任何名称替换，比如<code>\begin{equation}</code>和<code>\end{equation}</code>不是必须的。</p>

<h3 id="自动断行">自动断行</h3>
<p>由于自动断行将消耗额外的处理从而影响公式的显示速度，因此默认情况下 MathJax 的自动断行处理是关闭状态，但是遇到比较长的公式时容易超出页面范围，严重影响页面的显示效果，因此需要开启它，方法是添加以下配置信息：</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;script type="text/x-mathjax-config"&gt;
MathJax.Hub.Config({
	"HTML-CSS": { linebreaks: { automatic: true } },
		SVG: { linebreaks: { automatic: true } }
});
&lt;/script&gt;
</code></pre></div></div>
<p>自动断行仅处理段间公式，对行内公式不做处理。还可以通过<code>width</code>控制断行的宽度，默认为<code>container</code>，可制定具体的值，比如：</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"HTML-CSS": { linebreaks: { automatic: true, width: "450px" } }
</code></pre></div></div>

<h3 id="样式控制">样式控制</h3>
<p>默认情况下，公式与正文的前后距离比较大，原则上可通过样式控制修改其显示方式2，例如官方下载的<a href="https://github.com/mathjax/MathJax/" target="_blank">MathJax</a>源码包的<code>jax/output/HTML-CSS/config.js</code>文件中有以下样式控制信息：</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>styles: {

  ".MathJax_Display": {
    "text-align": "center",
    margin:       "1em 0em"
  },

  ".MathJax .merror": {
    "background-color": "#FFFF88",
    color:   "#CC0000",
    border:  "1px solid #CC0000",
    padding: "1px 3px",
    "font-style": "normal",
    "font-size":  "90%"
  }

}
</code></pre></div></div>
<p>那么就可在配置函数中进行样式控制：</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>MathJax.Hub.Config({
  "HTML-CSS": {
    preferredFont: "STIX"，
    scale: 100,
    styles: { ".MathJax_Display": { "text-align": "center", margin: "0em 0em" },
              ".MathJax .merror": { "background-color": "#FFFF88", color:   "#CC0000", border:  "1px solid #CC0000", padding: "1px 3px", "font-style": "normal", "font-size":  "90%" }}
  }
});
</code></pre></div></div>
<p>但是，经测试没有任何效果，因此只能通过以下方式将公式与正文的距离控制的紧凑一些。在<code>style.css</code>样式表中添加以下信息：</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>p code.has-jax { margin:0; padding:0; }
</code></pre></div></div>

<h3 id="数学公式示例">数学公式示例</h3>
<p>这是个行内公式 <code class="highlighter-rouge">\( e^{i \mathrm{\pi}} +1 = 0 \)</code>。
下面都是段间公式，第一个公式使用了公式引用：
<code class="highlighter-rouge">\[
\begin{aligned}
&amp; \dot{x} = \sigma (y - x)	\\
&amp; \dot{y} = \rho x - y - xz \\
&amp; \dot{z} = -\beta z + xy
\end{aligned}
\]</code>
下面这个公式自定义了编号值：
<code class="highlighter-rouge">\[
P(E)   = {n \choose k} p^k (1-p)^{ n-k}
\tag{Eq-x}
\]</code></p>
<h3 id="参考链接">参考链接</h3>
<ul>
  <li><a href="https://www.mathjax.org/" target="_blank">MathJax 官网</a></li>
  <li><a href="https://cwoebker.com/posts/latex-math-magic" target="_blank">LaTeX Math Magic</a></li>
  <li><a href="http://rangerway.com/way/2013/10/05/latex-note-and-jekyll/" target="_blank">LaTeX Notes &amp; MathJax in Jekyll</a></li>
</ul>

                <div class="clearfix"></div>
			</div>

            <!-- Post Date -->
            <p>
            <small>
                <span class="post-date"><time class="post-date" datetime="2018-12-17">17 Dec 2018</time></span>           
                
                </small>
            </p>
            
            
            
             <!-- Author Box -->
                
            
            

			
		</div>
		<!-- End Post -->
        
        <!-- Right Sidebar -->
        <div class="col-md-4 col-lg-4">
        <div class="sidebar-right">
        <div class="sidebar">
        
<!-- ================== Research ====================================
	==================================================== -->
            
        <div class="sidebar-section">
            <h5><span>RESEARCH</span></h5>
            <ul style="list-none;">
            <li><a target="_top" href="/research/MPC">Model Predictive Control</a></li>
            </ul>
        </div>

<!-- ================== NOTE ====================================
	==================================================== -->
        <div class="sidebar-section">
            <h5><span>Note</span></h5>
            <ul style="list-none;">
            <li><a target="_top" href="/note/switched-system-basic">Switched System Basic</a></li>
            <li><a target="_top" href="/note/mathjax">MathJax</a></li>
            </ul>
        </div>
            

            
</div>
        </div>
        </div>

	</div>

<!-- End Article
================================================== -->
    </div>

    </div><!-- /.container --> 



    <!-- Before Footer
    ================================================== --> 
<!--    <div class="beforefooter">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-8">
                    <h3>This is your final call to action area. Shine like a star, make them want you, tell 'em to push that button!</h3>
                    <p>We offer a <span>30 Day Money Back Guarantee</span>, so joining is <span class="risk-free">Risk-Free!</span></p>
                    <a class="btn btn-primary btn-lg" href="#">Join us yesterday</a>
                </div>
                <div class="col-md-4 text-right footersocial">
                    <h5>Connect with Us</h5>
                    <i class="fa fa-facebook"></i>
                    <i class="fa fa-twitter"></i>
                        <i class="fa fa-google"></i>
                     <i class="fa fa-pinterest"></i>
                     <i class="fa fa-github"></i>
                </div>
            </div>
        </div>
    </div>
-->
    <!-- Begin Footer
    ================================================== -->
<!--
    <footer class="footer">

        <div class="container">

            <div class="row">
                <div class="col-sm-3">
                <div class="footer-widget">
                <a href="/contact">
                <img src="/assets/images/logo-footer.png">
                </a>
                </div>
                </div>

                <div class="col-sm-3">
                <div class="footer-widget">
                <h5 class="title">Resources</h5>
                <ul>
                <li><a target="_blank" href="https://m.do.co/c/84c9b45d0c47">Digital Ocean</a></li>
                <li><a target="blank" href="https://www.cloudways.com/en/pricing.php?id=153986&amp;a_bid=005da123">Cloudways</a></li>
                <li><a target="blank" href="http://shareasale.com/r.cfm?b=875645&amp;u=1087935&amp;m=41388&amp;urllink=&amp;afftrack=">Page Speed Test</a></li>
                <li><a target="blank" href="https://www.wowthemes.net/affiliate-area/?utm_source=fromjekyllsidebar&utm_campaign=sidebar">Partner with Us</a></li>
                <li><a target="blank" href="https://www.wowthemes.net/category/jekyll-themes/">Our Jekyll Themes</a></li>
                </ul>
                </div>
                </div>

                <div class="col-sm-3">
                <div class="footer-widget">
                <h5 class="title">Author</h5>
                <ul>
                <li><a href="https://www.wowthemes.net/premium-themes-templates/">About Us</a></li>
                <li><a target="_blank" href="https://www.wowthemes.net/affiliate-area/">Affiliates</a></li>
                <li><a href="https://www.wowthemes.net/terms-and-conditions/">License</a></li>
                <li><a href="https://www.wowthemes.net/blog/">Blog</a></li>
                <li><a href="https://www.wowthemes.net/support/">Contact</a></li>
                </ul>
                </div>
                </div>

                <div class="col-sm-3">
                <div class="footer-widget textwidget">
                    <h5 class="title">Download</h5>
                    <p>Download "Affiliates" theme and use it for your next Jekyll project. If you have a question, a bug report, or if you simply want to say hi, <a href="https://www.wowthemes.net/support/">contact us here</a>.</p> 
                    <a href="https://github.com/wowthemesnet/affiliates-jekyll-theme/archive/master.zip">Download Theme</a>                    
                </div>
                </div>
            </div>

            <div class="copyright">
                <p class="pull-left">
                Copyright © 2018 Guhao Sun's Website.
                </p>
                <p class="pull-right">
               ==  Please, leave credit to author unless you own a commercial license: https://www.wowthemes.net/freebies-license/ ===
                <a target="_blank" href="https://www.wowthemes.net/free-jekyll-template-affiliates/">"Affiliates Theme"</a> - Design & Code by WowThemes.net
                </p>
                <div class="clearfix"></div>
            </div>

        </div>

    </footer>
-->
    <!-- End Footer
    ================================================== -->

    
</div> <!-- /.site-content>

<!-- JavaScript
================================================== -->
    
<script src="/assets/js/jquery.min.js"></script>
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
    
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>
    
<script src="/assets/js/ie10-viewport-bug-workaround.js"></script>
    
<script type='text/javascript' src='/assets/js/masonry.pkgd.min.js'></script>
    
<script src="/assets/js/theme.js"></script>    
    
</body>
    
</html>